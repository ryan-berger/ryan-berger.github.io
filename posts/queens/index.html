<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using SAT to Get the World Record on LinkedIn's Queens | Ryan Berger's Page</title><meta name=keywords content><meta name=description content="Special thanks to @tombh for proofing this blog post!
Edit 5/28: added a link to the repo and corrected the solver I used
Did you know that LinkedIn has games? I sure as hell didn&rsquo;t until my Dad
showed me that they in fact have 5 (!) different games that you can play.
One of them stood out to me as somewhat interesting, Queens:

Solved Queens board"><meta name=author content="Ryan Berger"><link rel=canonical href=https://ryanberger.me/posts/queens/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://ryanberger.me/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://ryanberger.me/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://ryanberger.me/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://ryanberger.me/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://ryanberger.me/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ryanberger.me/posts/queens/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body)></script><meta property="og:url" content="https://ryanberger.me/posts/queens/"><meta property="og:site_name" content="Ryan Berger's Page"><meta property="og:title" content="Using SAT to Get the World Record on LinkedIn's Queens"><meta property="og:description" content="Special thanks to @tombh for proofing this blog post!
Edit 5/28: added a link to the repo and corrected the solver I used
Did you know that LinkedIn has games? I sure as hell didn‚Äôt until my Dad showed me that they in fact have 5 (!) different games that you can play.
One of them stood out to me as somewhat interesting, Queens:
Solved Queens board"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-26T11:00:00-07:00"><meta property="article:modified_time" content="2025-05-26T11:00:00-07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using SAT to Get the World Record on LinkedIn's Queens"><meta name=twitter:description content="Special thanks to @tombh for proofing this blog post!
Edit 5/28: added a link to the repo and corrected the solver I used
Did you know that LinkedIn has games? I sure as hell didn&rsquo;t until my Dad
showed me that they in fact have 5 (!) different games that you can play.
One of them stood out to me as somewhat interesting, Queens:

Solved Queens board"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ryanberger.me/posts/"},{"@type":"ListItem","position":2,"name":"Using SAT to Get the World Record on LinkedIn's Queens","item":"https://ryanberger.me/posts/queens/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using SAT to Get the World Record on LinkedIn's Queens","name":"Using SAT to Get the World Record on LinkedIn\u0027s Queens","description":"Special thanks to @tombh for proofing this blog post!\nEdit 5/28: added a link to the repo and corrected the solver I used\nDid you know that LinkedIn has games? I sure as hell didn\u0026rsquo;t until my Dad showed me that they in fact have 5 (!) different games that you can play.\nOne of them stood out to me as somewhat interesting, Queens:\nSolved Queens board\n","keywords":[],"articleBody":"Special thanks to @tombh for proofing this blog post!\nEdit 5/28: added a link to the repo and corrected the solver I used\nDid you know that LinkedIn has games? I sure as hell didn‚Äôt until my Dad showed me that they in fact have 5 (!) different games that you can play.\nOne of them stood out to me as somewhat interesting, Queens:\nSolved Queens board\nQueens looks a lot like the classic logic problem, N-Queens (a generalized version of 8-Queens). N-Queens asks ‚Äúgiven an NxN board, can you place N queens such that no queen shares the same row, column, or diagonal (which is how a queen moves in chess)?‚Äù\nN-Queens is impossible for \\(N \\leq 3\\), and for any greater N it can be solved via a backtracking algorithm which places one queen at a time, ‚Äúbacktracking‚Äù to a valid partial solution each time it encounters an invalidly placed queen. This lets the algorithm cut out large swaths of the search space.\nThat‚Äôs cool and all when you are prepping for Leetcode interviews, but I‚Äôm not solving Leetcode problems. But I am looking to get better at reducing problems to SAT.\nGood material for a blog post isn‚Äôt enough (I‚Äôm vain), so I‚Äôve built a Firefox extension that will play my solution so I can own my Dad and all those CEOs the game keeps comparing me to.\nQuick SAT Rundown For the uninitiated, SAT is a classic computer science problem known to be NP-complete.\nThe core of the problem is finding boolean values for a given formula - which are built by using logical operations of and (\\(\\land\\)), not (\\(\\neg\\)), and or (\\(\\lor\\)) - such that the formula returns true.\nA provably correct solver will have to try all possible boolean values for the formula, of which there are \\(2^n\\) with \\(n\\) being the number of variables in the formula. Now-a-days, solvers use pretty fancy algorithms to section off large parts of the search space so hopefully it doesn‚Äôt have to actually try that many.\nMany problems can be turned into ‚Äúdecision‚Äù problems (a yes or no) which also happens to correspond pretty well to SAT problems. Today I‚Äôm faced with one of those decision problems.\nNow on with the show.\nN-Queens SAT Reduction To turn N-Queens into a SAT problem, we need to figure out what we‚Äôre asking the SAT solver a ‚Äúyes‚Äù or ‚Äúno‚Äù question about. In my case, I want to ask it ~81 (9x9) questions each being: ‚Äúis there a queen placed at square (row, column)‚Äù\nTo do this means we‚Äôll introduce NxN variables into the formula, one for each square/cell.\nFor each given cell, there are three different types of constraints on it:\nIt must be the only element that is true on the entire row It must be the only element that is true on the entire column It must be the only element that is true on its two different diagonals My initial attempt to encode this was to write a formula for each cell describing all the cells it was not, thinking that somehow this would magically end up in a satisfiable formula.\nSo, in this case we would say for a given cell:\nif a queen is placed on a cell then it implies everything else on its row is false if a queen is placed on a cell then it implies everything else on its column is false if a queen is placed on a cell then it implies everything else on its diagonals are false. This, however, is naive and generates quite a few formulas. Using the above constraints it also doesn‚Äôt require that any are set. This means all cells being set to false (or no queen placed there) will satisfy the formula (making the solver‚Äôs job very easy).\nCheating (myself) After my initial attempt and confusion, I stumbled on a PowerPoint‚Ñ¢ lecture about reducing N-Queens to SAT that was quite helpful and showed where my approach was failing.\nInstead of going cell, by cell, it is a bit easier to model the problem row-by-row, column-by-column, and diagonal-by-diagonal.\nIt also showed where my approach went wrong: generating an overly verbose boolean formula for the row and column at each cell to contain ‚Äúat most one‚Äù variable that is true, but not to contain ‚Äúexactly one‚Äù that is true.\nThankfully, ‚Äúat most one‚Äù is on the way to ‚Äúexactly one.‚Äù If we had ‚Äúexactly one,‚Äù it also must be the case that there be ‚Äúat most one.‚Äù What are we missing? ‚ÄúAt least one.‚Äù If we have ‚Äúat least one‚Äù and ‚Äúat most one,‚Äù then we end up with ‚Äúexactly one.‚Äù ‚ÄúAt least one‚Äù is also very easy! It is just an or (\\(\\lor\\)) of all the cells.\nWith this knowledge we can build a helper function \\(exactlyOne\\) and use it for each row and column: $$ exactlyOne(\\{‚Ä¶\\}) = atMostOne(\\{‚Ä¶\\}) \\wedge atLeastOne(\\{‚Ä¶\\}) $$\nWhere \\(atLeastOne\\) is all the elements (in the row, or column) or‚Äôed \\(\\lor\\), but \\(atMostOne\\) is a bit more complicated:\n$$ atMostOne(terms) = \\bigwedge\\limits_{i=0}^{N-1} (terms_{i} \\implies (\\bigwedge\\limits_{j=i+1}^N \\neg terms_{j})) $$\nor if you‚Äôre not a programmer who thinks about \\(\\bigwedge\\) like a loop: $$ atMostOne(terms) = \\bigwedge\\limits_{0 \\leq i","wordCount":"1904","inLanguage":"en","datePublished":"2025-05-26T11:00:00-07:00","dateModified":"2025-05-26T11:00:00-07:00","author":[{"@type":"Person","name":"Ryan Berger"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://ryanberger.me/posts/queens/"},"publisher":{"@type":"Organization","name":"Ryan Berger's Page","logo":{"@type":"ImageObject","url":"https://ryanberger.me/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://ryanberger.me/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://ryanberger.me/blog/ title=Blog><span>Blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ryanberger.me/>Home</a>&nbsp;¬ª&nbsp;<a href=https://ryanberger.me/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Using SAT to Get the World Record on LinkedIn's Queens</h1><div class=post-meta><span title='2025-05-26 11:00:00 -0700 -0700'>May 26, 2025</span>&nbsp;¬∑&nbsp;9 min&nbsp;¬∑&nbsp;Ryan Berger</div></header><div class=post-content><p><em>Special thanks to @tombh for proofing this blog post!</em></p><p><em>Edit 5/28: added a link to the repo and corrected the solver I used</em></p><p>Did you know that LinkedIn has games? I sure as hell didn&rsquo;t until my Dad
showed me that they in fact have 5 (!) different games that you can play.</p><p>One of them stood out to me as somewhat interesting, Queens:</p><p><img alt="Solved Queens Board" loading=lazy src=/queens/queens.png>
<em>Solved Queens board</em></p><p>Queens looks a lot like the classic logic problem, N-Queens (<a href=https://en.wikipedia.org/wiki/Eight_queens_puzzle>a generalized version of 8-Queens</a>).
N-Queens asks &ldquo;given an NxN board, can you place N queens such that no queen shares the same row, column, or diagonal
(which is how a queen moves in chess)?&rdquo;</p><p>N-Queens is impossible for \(N \leq 3\), and for any greater N it can be solved via a backtracking algorithm
which places one queen at a time, &ldquo;backtracking&rdquo; to a valid partial solution each time it encounters an
invalidly placed queen. This lets the algorithm cut out large swaths of the search space.</p><p>That&rsquo;s cool and all when you are prepping for Leetcode interviews, but I&rsquo;m not solving Leetcode problems.
But I <em>am</em> looking to get better at reducing problems to SAT.</p><p>Good material for a blog post isn&rsquo;t enough (I&rsquo;m vain), so I&rsquo;ve built a Firefox extension that will play my
solution so I can own my Dad and all those CEOs the game keeps comparing me to.</p><h2 id=quick-sat-rundown>Quick SAT Rundown<a hidden class=anchor aria-hidden=true href=#quick-sat-rundown>#</a></h2><p>For the uninitiated, <a href=https://en.wikipedia.org/wiki/Boolean_satisfiability_problem>SAT</a> is a classic computer
science problem known to be NP-complete.</p><p>The core of the problem is finding boolean values for a given formula - which are built by using logical
operations of and (\(\land\)), not (\(\neg\)), and or (\(\lor\)) - such that the formula returns true.</p><p>A provably correct solver will have to try all possible boolean values for the formula, of which there are
\(2^n\) with \(n\) being the number of variables in the formula. Now-a-days, solvers use
<a href=https://en.wikipedia.org/wiki/Conflict-driven_clause_learning>pretty fancy algorithms</a>
to section off large parts of the search space so hopefully it doesn&rsquo;t have to actually try that many.</p><p>Many problems can be turned into &ldquo;decision&rdquo; problems (a yes or no) which also happens to correspond pretty well to
SAT problems. Today I&rsquo;m faced with one of those decision problems.</p><p>Now on with the show.</p><h2 id=n-queens-sat-reduction>N-Queens SAT Reduction<a hidden class=anchor aria-hidden=true href=#n-queens-sat-reduction>#</a></h2><p>To turn N-Queens into a SAT problem, we need to figure out <em>what</em> we&rsquo;re asking the SAT solver
a &ldquo;yes&rdquo; or &ldquo;no&rdquo; question about. In my case, I want to ask it ~81 (9x9) questions each being:
&ldquo;is there a queen placed at square (row, column)&rdquo;</p><p>To do this means we&rsquo;ll introduce NxN variables into the formula, one for each square/cell.</p><p>For each given cell, there are three different types of constraints on it:</p><ul><li>It must be the only element that is true on the entire row</li><li>It must be the only element that is true on the entire column</li><li>It must be the only element that is true on its two different diagonals</li></ul><p>My initial attempt to encode this was to write a formula for each cell describing
all the cells it was <em>not</em>, thinking that somehow this would magically end up in a satisfiable formula.</p><p>So, in this case we would say for a given cell:</p><ul><li>if a queen is placed on a cell then it implies everything else on its row is false</li><li>if a queen is placed on a cell then it implies everything else on its column is false</li><li>if a queen is placed on a cell then it implies everything else on its diagonals are false.</li></ul><p>This, however, is naive and generates quite a few formulas. Using the above constraints it also doesn&rsquo;t require that
any are set. This means all cells being set to false (or no queen placed there) will satisfy the
formula (making the solver&rsquo;s job very easy).</p><h2 id=cheating-myself>Cheating (myself)<a hidden class=anchor aria-hidden=true href=#cheating-myself>#</a></h2><p>After my initial attempt and confusion, I stumbled on a <a href=https://www.cs.drexel.edu/~johnsojr/2017-18/fall/CS270/Lectures/8/sat.pdf>PowerPoint‚Ñ¢ lecture</a>
about reducing N-Queens to SAT that was quite helpful and showed where my approach was failing.</p><p>Instead of going cell, by cell, it is a bit easier to model the problem row-by-row, column-by-column,
and diagonal-by-diagonal.</p><p>It also showed where my approach went wrong: generating an overly verbose boolean formula
for the row and column at each cell to contain &ldquo;at most one&rdquo; variable that is true, but not to contain
&ldquo;exactly one&rdquo; that is true.</p><p>Thankfully, &ldquo;at most one&rdquo; is on the way to &ldquo;exactly one.&rdquo; If we had &ldquo;exactly one,&rdquo; it also must be the
case that there be &ldquo;at most one.&rdquo; What are we missing? &ldquo;At least one.&rdquo; If we have &ldquo;at least one&rdquo; and &ldquo;at most one,&rdquo;
then we end up with &ldquo;exactly one.&rdquo; &ldquo;At least one&rdquo; is also very easy! It is just an or (\(\lor\)) of all the cells.</p><p>With this knowledge we can build a helper function \(exactlyOne\) and use it for each row and column:
$$
exactlyOne(\{&mldr;\}) = atMostOne(\{&mldr;\}) \wedge atLeastOne(\{&mldr;\})
$$</p><p>Where \(atLeastOne\) is all the elements (in the row, or column) or&rsquo;ed \(\lor\), but \(atMostOne\) is a bit more complicated:</p><p>$$
atMostOne(terms) = \bigwedge\limits_{i=0}^{N-1} (terms_{i} \implies (\bigwedge\limits_{j=i+1}^N \neg terms_{j}))
$$</p><p>or if you&rsquo;re not a programmer who thinks about \(\bigwedge\) like a loop:
$$
atMostOne(terms) = \bigwedge\limits_{0 \leq i&lt;j \leq n} terms_i \implies \neg terms_j
$$</p><p>For each item in \(terms\), it is implied that it is <em>not</em> any of the following terms.</p><h3 id=an-aside>An Aside<a hidden class=anchor aria-hidden=true href=#an-aside>#</a></h3><p>This initially confused me as my first idea was that &ldquo;given a cell, it implies all the cells in its group (row, column) are
false&rdquo;. This would require the inner \(\bigwedge\) to be bounded via \(j=0, j\neq i\) so that it gets all the other items of the group.
You can get a good feel for why the above is more optimal though if you write it out when \(n=2\):
$$
(term_i \implies (\neg term_{i+1})) \land (term_{i+1} \implies (\neg term_i))
$$</p><p>Oops! The right-hand side of the \(\land\) is just the contrapositive, so you&rsquo;re and&rsquo;ing (\(\land\)) a duplicate condition.
A better way of seeing it is when you use a logical interpretation such as in the <a href=https://www.cs.drexel.edu/~johnsojr/2017-18/fall/CS270/Lectures/8/sat.pdf>N-Queens Lecture</a>.</p><p>There, the multiple contrapositives will show up as duplicate pairs of \(\lor\)s that look like:
$$
(\neg term_i \lor \neg term_j) \land (\neg term_j \lor \neg term_i)
$$</p><p>Which is why the inner loop&rsquo;s bound starts at the next item in the list, as to not duplicate the effort
of the previous iteration by generating duplicate pairs.</p><h3 id=back-to-it>Back to It<a hidden class=anchor aria-hidden=true href=#back-to-it>#</a></h3><p>This helpful function can aid us in formulating the constraints for rows and columns since it is guaranteed
that a queen must be on every row and every column. However, it is not guaranteed that every diagonal
must have a queen, just that two queens should not share a diagonal.</p><p>For example:</p><pre tabindex=0><code>. . Q X
Q . X .
. X . Q
X Q . .
</code></pre><p>Notice that the diagonal denoted with X&rsquo;s does not have a queen. This is a gotcha we&rsquo;ll
see in a moment, but the easy way to solve this with another existing function we have is the \(atMostOne\) constraint.
It is true that there must only be \(atMostOne\) queen per diagonal.</p><p>Now that we have all the building blocks, we can build the final formula:
$$
rowConstraint = \bigwedge\limits_{i=0}^N exactlyOne(row_{i}) \newline
columnConstraint = \bigwedge\limits_{i=0}^N exactlyOne(column_{i}) \newline
diagonalConstraint = \bigwedge\limits_{i=0}^{numDiagonal} atMostOne(diagonal_{i}) \newline
NQueens = rowConstraint \wedge columnConstraint \wedge diagonalConstraint
$$</p><h2 id=queens>Queens<a hidden class=anchor aria-hidden=true href=#queens>#</a></h2><p>So, now that we&rsquo;ve solved N-Queens, LinkedIn&rsquo;s Queens should be very similar, but the approach needs to be adapted
to the new rules. The rules for this version is as follows:</p><ul><li>There must be one queen per row</li><li>There must be one queen per column</li><li>There must be one queen per color</li><li>No queen can be adjacent to another</li></ul><p>So we&rsquo;ve added the constraint of color but dropped the constraint that the queens couldn&rsquo;t be on the same
diagonal. The only diagonal that we&rsquo;re worried about is the one that is directly adjacent.</p><p>Armed with our helper of \(exactlyOne\) in hand, we can start to get a foothold on the problem:
$$
rowConstraint = \bigwedge\limits_{i=0}^N exactlyOne(row_{i}) \newline
columnConstraint = \bigwedge\limits_{i=0}^N exactlyOne(column_{i}) \newline
colorConstraint = \bigwedge\limits_{i=0}^{numColors} exactlyOne(colors_{i}) \newline
$$</p><p>Now all we have left is to deal with adjacency. What is adjacency? In Queen&rsquo;s context we can&rsquo;t have a queen
placed on the same color, nor can they be placed on the same row or column. What does that leave us with?</p><p>Well, it only leaves us with the <em>adjacent diagonal</em> of every cell that borders a different color. I will call this an &ldquo;edge&rdquo;
For example:</p><pre tabindex=0><code>X X . .
X Y . .
. . . .
. . . .
</code></pre><p>In this case, the only adjacency we&rsquo;d be worried about with colors X and Y is the diagonally adjacent (0, 0) -> (1,1).
Since the number of edges with such a diagonal is small, we can just iterate over every cell on the board,
look at its diagonal neighbors, and if they <em>aren&rsquo;t</em> the same color then we will add them to a set for the cell.</p><p>The pseudo-code would be something like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>Pair <span style=color:#f92672>=</span> Tuple[int, int]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_diagonal_neighbors</span>(i: int, j: int, n: int) <span style=color:#f92672>-&gt;</span> List[Pair]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_edges</span>(grid: List[List[Pair]]) <span style=color:#f92672>-&gt;</span> Dict[Pair, Set[Pair]]:
</span></span><span style=display:flex><span>    result <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(len(grid)):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> range(len(row)):
</span></span><span style=display:flex><span>            <span style=color:#75715e># get diagonal neighbors that are different than the current cell</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (dx, dy) <span style=color:#f92672>in</span> get_diagonal_neighbors(i, j):
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> grid[i][j] <span style=color:#f92672>!=</span> grid[dx][dy]:
</span></span><span style=display:flex><span>                    <span style=color:#75715e># add them to the set</span>
</span></span><span style=display:flex><span>                    result[(i, j)] <span style=color:#f92672>=</span> set(result[(i, j)] <span style=color:#f92672>|</span> {(dx, dy)})
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result
</span></span></code></pre></div><p>Now that we have a dictionary full of edges which correspond to their &ldquo;adjacent&rdquo; neighbors,
we need to figure out how to constrain them.</p><p>Without much thinking, I initially pulled out \(exactlyOne\). However, in doing so, you make it so that
the solution <em>must</em> contain a queen in one of the spots that have an adjacency. This will work for a very small subset
of Queens games (which I found out the hard way).</p><p>Instead, like diagonals in N-Queens, we just need to make sure that there is \(atMostOne\) item in the adjacent grouping.</p><p>Because I&rsquo;m lazy, the above code isn&rsquo;t particularly careful about generating duplicate \(atMostOne\) constraints.
Using the previous example, both <code>(0, 0) -> {(1,1)}</code> and <code>(1,1) -> {(0,0)}</code> would be in <code>result</code>, meaning that
an implication will get generated both ways.</p><p>Since SAT solvers are super smart about this sort of thing, it isn&rsquo;t hindering anything, but is left as an exercise
for the reader to actually optimize this.</p><p>Now that we have all the pieces, lets formalize it:
$$
&mldr;\newline
adjacentConstraint = \bigwedge\limits_{i=0}^{numAdjacent} atLeastOne(adjacent_i) \newline
Queens = rowConstraint \wedge columnConstraint \wedge \newline
colorConstraint \wedge adjacentConstraint
$$</p><h2 id=going-for-gold>Going for Gold<a hidden class=anchor aria-hidden=true href=#going-for-gold>#</a></h2><p>After proving to myself that this worked via manually inputting Queens games, it was time to put it to the test:
getting the world record on LinkedIn&rsquo;s Queens. SAT solvers are slow in the worst case, but it turns out that
most problems aren&rsquo;t the worst case and CVC5 solves this blazingly fast.</p><p>It took some work to get a Firefox extension up and running with a small <a href=https://github.com/ryan-berger/queens/blob/master/main.py>Python API</a> to ferry the puzzle/solution to
and from CVC5 (wish I could say it was using Z3-wasm, but I had many <a href=https://github.com/Z3Prover/z3/issues/7556>issues</a>), and I had it working.</p><p>And I&rsquo;m proud to report, that it did it üéâ</p><p>I have become the conduit through which CVC5 has proven itself smarter than 99% of CEOs and 99% of my fellow
University of Utah alums.</p><video src=/queens/world-record.mp4 autoplay controls style="padding:var(--gap);width:calc(var(--main-width) - var(--gap) * 2)"></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ryanberger.me/posts/ghost-at-your-own-transplant/><span class=title>¬´ Prev</span><br><span>Ghost At Your Own Transplant</span>
</a><a class=next href=https://ryanberger.me/posts/programming-at-cafe/><span class=title>Next ¬ª</span><br><span>Programming at a Cafe at the End of the Universe</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://ryanberger.me/>Ryan Berger's Page</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>